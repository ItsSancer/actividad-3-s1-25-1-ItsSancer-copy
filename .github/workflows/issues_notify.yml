name: Issues â†’ Telegram Topic (plain)

on:
  issues:
    types: [opened]
  issue_comment:
    types: [created]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Notificar nueva issue en topic especÃ­fico
        if: github.event_name == 'issues' && github.event.action == 'opened'
        run: |
          MESSAGE=$(cat <<'EOF'
ðŸš¨ Nueva Issue Abierta ðŸš¨
ðŸ“ Repositorio: ${{ github.repository }}
ðŸ“ TÃ­tulo: ${{ github.event.issue.title }}
ðŸ‘¤ Autor: ${{ github.event.issue.user.login }}
ðŸ“ DescripciÃ³n:
${{ github.event.issue.body }}
ðŸ”— Enlace: ${{ github.event.issue.html_url }}
EOF
)
          curl -X POST "https://api.telegram.org/bot${{ secrets.BOT_TOKEN }}/sendMessage" \
            -d chat_id=${{ secrets.CHAT_ID }} \
            -d message_thread_id=2 \
            --data-urlencode text="$MESSAGE"

      - name: Notificar comentario en issue en topic especÃ­fico
        if: github.event_name == 'issue_comment' && github.event.action == 'created'
        run: |
          MESSAGE=$(cat <<'EOF'
ðŸ’¬ Nuevo Comentario en Issue ðŸ’¬
ðŸ“ Issue: ${{ github.event.issue.title }}
ðŸ‘¤ Comentado por: ${{ github.event.comment.user.login }}
ðŸ—’ï¸ Comentario:
${{ github.event.comment.body }}
ðŸ”— Enlace: ${{ github.event.comment.html_url }}
EOF
)
          curl -X POST "https://api.telegram.org/bot${{ secrets.BOT_TOKEN }}/sendMessage" \
            -d chat_id=${{ secrets.CHAT_ID }} \
            -d message_thread_id=2 \
            --data-urlencode text="$MESSAGE"
